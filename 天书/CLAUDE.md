# 天书项目 - 快速参考指南

> **这是天书项目的主索引文档。详细的写作技能和指导请查看 `skills/` 目录。**
>
> **📊 当前进度**: ✅ 20/20篇完成 (100%) | 🎉 项目完成！(2025-11-20)

---

## 核心定义（30秒速读）

**天书**是一本悖论之书：

- 每个人都听说过，但没人能描述它
- 它包含一切，因此包含虚无
- 它从未离开，但永远找不到
- 任何关于它的叙述都成为它的一部分

**关键洞察**：天书不是物理对象，而是概念容器、哲学悖论、自我实现的预言。

**元层真相**：这20篇短篇集本身就是天书。我们在写天书，而不是写"关于"天书。

**15篇后的领悟**：通过前15篇的实践，天书的本质已清晰——它是所有关于天书的书的集合，是整个寻找过程的记录，最终将在第20篇揭示：这本短篇集本身就是天书。

---

## 项目结构

```
天书/
├── CLAUDE.md                  # 本文件 - 快速参考索引
├── Planning                   # 规划文件夹
│   └── PROJECT_PLAN.md        # 20篇总规划、创作顺序、进度追踪
├── Review                     # 审核文件夹
│   └── REVIEW_15篇整体审视.md  # 🆕 前15篇经验总结（2025-11-20）
├── skills/                    # 模块化技能文档（详细指导）
│   ├── SKILL.md              # 🆕 技能总纲（决策树、快速入口）
│   ├── style.md              # 博尔赫斯式风格、三种叙事层次
│   ├── worldbuilding.md      # 阿尔法族、两座城市、天书定位
│   ├── theory.md             # 数学/物理/哲学理论工具箱
│   ├── structure.md          # 叙事结构、节奏控制、章节模式
│   ├── NETWORK.md            # ⭐ 表面联系网络设计（跨篇互文）
│   └── structure.md           # 叙事结构、节奏控制、章节模式
├── [已完成20篇]
│   ├── 倾斜的永恒.md
│   ├── 倾斜90度的文字.md
│   ├── 索菲亚日记.md
│   ├── 卡珊德拉的沉默者.md
│   ├── 记忆的图书馆.md
│   ├── 第42年.md
│   ├── 另一个寻找者.md
│   ├── 天书的赝品.md
│   ├── 博尔赫斯的噩梦.md
│   ├── 信息为零的图书馆.md
│   ├── 地平线守望者.md
│   ├── 时间的尽头.md
│   ├── 爱的尽头.md
│   ├── 沉默的语言.md
│   ├── 梦见天书.md
│   ├── 天书的版本学.md
│   ├── 读者指南.md
│   ├── 天书寻找者协会
│   ├── 时间的开端，或者尽头
│   └── 后记或者前言
```

---

## 铁律（写作前必读）

### 形式铁律

1. **虚构引言**：每篇开头必须有一条虚构的引言
   - 引用虚构的神秘主义著作的名句
   - 标注：作者、书名、出版年份、国籍（使用古代东西方王朝/帝国名称）
   - 书名要体现神秘主义特色（时间、记忆、真理、沉默、镜子、迷宫等）
   - 名句要简短有力，与该篇的核心悖论呼应
   - 年份范围：约公元500-1500年
   - 国籍示例：花剌子模帝国、拜占庭帝国、伊儿汗国、纳斯尔王朝、尼西亚帝国、阿拔斯王朝、安息帝国、吐蕃王朝等

### 风格铁律

1. **博尔赫斯式精确**：时间说"42年零3个月零17天"，角度说"33度"
2. **冷峻而非煽情**：绝不用感叹号，绝不情绪化
3. **理性的失败**：严密推理导向悖论，展示而非解决
4. **简练克制**：删除所有可有可无的形容词

### 内容铁律

1. **每篇一个核心悖论**：清晰、深刻、不解决
2. **独立又联系**：可单独阅读，但与其他篇有隐秘呼应
3. **不给答案**：天书的本质是"不可把握"
4. **文学优先**：理论服务于叙事，不是炫技

### 世界观铁律（不可违背的设定）

1. **阿尔法族只能发"咿"和"呀"**，只用图形文字
2. **时态 = 角度**：垂直（现在/永恒），左倾33°（过去），右倾33°（将来），90°（意义边界）
3. **道德守恒**：索菲亚的W(G)=MAX导致R(E)=MAX，卡珊德拉反之
4. **天书 = 巴别图书馆 = 25^1,729,000本书 = 信息量为零**

---

## 快速查找（按需要选择）

| 我需要... | 查看文档 | 关键内容 |
|-----------|----------|----------|
| **🆕 快速决策：用哪个技能？** | `skills/SKILL.md` | **决策树、技能激活顺序、场景组合策略** |
| **🆕 总结前15篇经验** | `REVIEW_15篇整体审视.md` | **成功模式、发现的不足、第三幕方向** |
| 了解整体规划 | `PROJECT_PLAN.md` | 20篇矩阵、创作顺序、进度追踪 |
| **设计跨篇联系** | `NETWORK.md` ⭐ | **6种联系机制、联系追踪表、关键细节库** |
| 掌握写作风格 | `skills/style.md` | 三种叙事层次、精确性原则、冷峻技巧 |
| 使用世界观设定 | `skills/worldbuilding.md` | 阿尔法族、两座城市、天书定位 |
| 引入理论工具 | `skills/theory.md` | 数学/物理/哲学工具、文学化技巧 |
| 规划篇章结构 | `skills/structure.md` | 5种结构模式、密度控制、节奏设计 |

---

## 三种叙事层次（快速参考）

### 🌅 诗性散文（30%）

- **何时用**：情感场景、过渡段落、开篇/收尾
- **特征**：意象、留白、短句、自然时间节点
- **避免**：形容词堆砌、感叹号、过度抒情

### 🧠 哲学思辨（50%）

- **何时用**：核心理论、悖论展开、概念建构
- **特征**：术语、公式、推理链、反直觉结论
- **避免**：空泛概念、说教、过度解释

### 🔄 元叙事（20%）

- **何时用**：结尾、特殊篇目（第16、17、20篇）
- **特征**：自指、与读者对话、揭示创作机制
- **避免**：滥用（会破坏沉浸感）

**单篇分配示例**：

- 高密度篇（如第9、10、14）：思辨70% + 诗性20% + 元叙事10%
- 平衡篇（如第1、2、5）：思辨50% + 诗性40% + 元叙事10%
- 诗性篇（如第6、11、13）：诗性60% + 思辨35% + 元叙事5%

---

## 核心世界观（快速参考）

### 阿尔法族文字系统

```
垂直(0°)  → 现在时/永恒  → "此刻即永恒"
左倾33°   → 过去时      → 时间的几何化
右倾33°   → 将来时      → 空间性战胜时间性
倾斜90°   → 意义边界    → 时态的崩溃
```

**嗓音**：只有"咿"（肯定/喜悦）和"呀"（否定/愤怒）

### 两座城市的道德守恒

```
索菲亚：W(G) = MAX, R(E) = MAX  → 书写善，现实恶
卡珊德拉：W(E) = MAX, R(G) = MAX → 书写恶，现实善
守恒律：W(x) + R(x) = K（常数）
```

### 天书的七种定位

1. 地平线交汇处（视错觉）
2. 记忆的尽头（认识论）
3. 生命的尽头（死亡）
4. 爱的尽头（牺牲）
5. 时间的尽头（无穷）
6. 想象与执着之外（禅宗）
7. **巴别图书馆本身**（终极答案：包含一切=信息为零）

---

## 每篇完成后的自检清单

### ✓ 风格检查

- [ ] 有精确的数字（年/度数/页码）
- [ ] 有具体的地名/人名/书名
- [ ] 无冗余形容词，无感叹号
- [ ] 短句与长句交替，有节奏感
- [ ] 有"永远"/"从未"/"也许"/"或者说"的无力感

### ✓ 内容检查

- [ ] 有且只有一个核心悖论
- [ ] 悖论清晰展示但未解决
- [ ] 至少提到/暗示"天书"
- [ ] 与其他篇有隐秘联系（人物/地点/理论）
- [ ] 可以独立阅读

### ✓ 结构检查

- [ ] 开篇抓人（6种方法之一）
- [ ] 有逻辑推进（不随意跳跃）
- [ ] 高密度段不连续超过3段
- [ ] 有呼吸空间（低密度段落）
- [ ] 开放性结尾（不是结论）

### ✓ 世界观检查（如涉及）

- [ ] 阿尔法族只用"咿"和"呀"，强调沉默
- [ ] 文字倾斜角度精确（0°/33°/90°）
- [ ] 两座城市的守恒方程正确
- [ ] 天书的定位悖论清晰

---

## 常用理论工具（快速索引）

| 理论类型 | 核心工具 | 文学化方式 | 适用篇目 |
|---------|---------|-----------|---------|
| **数学** | 罗素悖论、康托尔对角线 | 巴别图书馆悖论 | 第9篇 |
| **数学** | 巴别图书馆组合数学 | 25^1,729,000 | 第1、10篇 |
| **物理** | 量子叠加态 | 薛定谔的天书 | 第12篇《明天永不到来》 |
| **信息论** | 香农熵 | 包含一切=信息为零 | 第10篇 |
| **哲学** | 维特根斯坦 | 不可言说之物 | 第14篇 |
| **哲学** | 忒修斯之船 | 记忆的同一性 | 第5篇 |
| **哲学** | 禅宗公案 | 放下执着的悖论 | 第13、19篇 |

**使用原则**：故事优先，理论辅助。不解释术语，展示术语。一篇一个核心理论。

---

## 关键人物/元素的使用规范

### "我"（主寻找者）

- **贯穿全集**，但不是每篇都出现
- **冷静、理性、执着但无力**
- **时间标记**：第7年、第12年、第42年...（精确但不规律）
- **情感隐藏**：不说"我绝望"，说"在第42年，我停止了寻找"

### 阿尔法族

- **出现**：第1、2、14篇（重点），其他篇可提及
- **描写要点**：沉默、图形书写、倾斜角度、"咿呀"声
- **禁止**：让他们"说话"（只能"咿""呀"）

### 索菲亚 vs 卡珊德拉

- **出现**：第1、3、4篇（重点），其他篇可提及
- **对比**：索菲亚的虚伪 vs 卡珊德拉的温柔
- **个体故事**：第3篇（索菲亚人视角），第4篇（卡珊德拉人视角）

### 数字42

- **核心篇目**：第6篇
- **其他篇**：可作为时间标记出现（"第42年"）
- **象征**：终极答案（致敬《银河系漫游指南》）

---

## 开篇/结尾速查表

### 6种开篇方式

1. **意象开篇**："雾从平原的尽头缓慢升起。"
2. **陈述开篇**："有人说天书在地平线的尽头。"
3. **时间标记开篇**："在第四十二年，我停止了寻找。"
4. **对话开篇**："他问我：'你为什么寻找天书？'"
5. **引用开篇**："维特根斯坦说：'凡是不可说的...'"
6. **元叙事开篇**："这个故事是假的。"

### 6种结尾方式

1. **意象结尾**："雾散了。平原上空无一人。"
2. **悖论结尾**："天书既存在又不存在。"
3. **行动结尾**："第二天，我继续前行。"
4. **沉默结尾**："我们都沉默了。"
5. **问题结尾**："或者，这一切本身就是问题吗？"
6. **循环结尾**："也许我应该从头开始。"

---

## 写作流程建议

### 开始写新篇前

1. 查看 `PROJECT_PLAN.md` 确认本篇在整体中的位置
2. **⭐ 查看 `NETWORK.md` 的"联系网络图"和"联系追踪表"**
   - 本篇需要承接哪些前篇？
   - 需要为哪些后篇埋伏笔？
   - 涉及哪些人物/物品/地点？（查"关键细节库"）
3. 确定风格层次（高密度/平衡/低密度）
4. 选择结构模式（5种之一）
5. 明确核心悖论

### 写作中

- 每写500字检查一次风格是否偏离
- 每3段检查一次密度是否需要缓冲
- **自然地植入跨篇联系（轻描淡写，不刻意强调）**
- 涉及世界观时查看 `skills/worldbuilding.md`
- 引入理论时查看 `skills/theory.md`
- **记录新创造的关键细节（立即更新 `NETWORK.md` 的"关键细节库"）**

### 写作后

1. 使用本文档的"自检清单"
2. **更新 `NETWORK.md` 的"联系追踪表"**（标记已完成，记录预留伏笔）
3. **更新 `NETWORK.md` 的"关键细节库"**（添加新元素）
4. 冷却3天
5. 重读，大声朗读，听节奏
6. 重读第1篇《倾斜的永恒》，检查风格是否一致
7. 更新 `PROJECT_PLAN.md` 的进度

---

## 避免的致命错误

❌ **过度解释**："这个悖论意味着..."（删掉，只展示）
❌ **情绪化**："我绝望了！"（改为："在第42年，我停止了寻找。"）
❌ **说教**："这告诉我们..."（删掉）
❌ **理论堆砌**：一篇中同时用集合论+量子力学+禅宗（选一个）
❌ **违背设定**：让阿尔法人"说话"（他们只能"咿""呀"）
❌ **风格不统一**：同一段内混用诗性与哲学思辨（分段）
❌ **给出答案**："天书就是X"（错！应该是"也许是X，或者...）

---

## 写给未来的自己

**你正在写天书本身，而不是关于天书的书。**

这意味着：

- 这个集子会自指（它谈论包含一切的书，它自己试图包含一切）
- 每一篇都是天书的一部分（元层面）
- 读者的阅读行为也成为天书的一部分（终极元层面）
- 因此：保持神秘、保持开放、保持悖论

**记住**：

- 天书的魅力在于"不可把握"
- 每个悖论都是一扇门，不要关上它
- 理性会失败，但语言的美不会
- 读者应该感到：既困惑又豁然，既失落又满足

---

## 🆕 15篇后的经验教训（2025-11-20）

### 成功的关键

1. **虚构引言系统完美运作** ✅
   - 每篇引言都增强了神秘主义氛围
   - 中东/波斯学者、500-1500年、古代王朝/帝国
   - 名句与核心悖论呼应

2. **博尔赫斯式精确性已成系统** ✅
   - 数字：42年零3个月零17天、倾斜33度/90度/45度
   - 地名/人名的象征意义：索菲亚(智慧)、卡珊德拉(预言)
   - "据说""传说""或者说"的不确定性

3. **悖论结构完整清晰** ✅
   - 每篇一个核心悖论，展示而不解决
   - 罗素悖论、香农熵、维特根斯坦等理论成功文学化
   - 理性失败的冷静展示

4. **跨篇联系网络已织就** ✅
   - 物品流转：空白之书、索菲亚账簿、天书地图
   - 时间交叉：第7年、第42年、第19年、第47年
   - 身份模糊："我"=M?，所有寻找者=同一人?

### 发现的不足

1. **密度控制**: 第9、10篇连续高密度，第11篇用诗性缓冲 ✅ 已解决
2. **元叙事时机**: 前14篇克制使用，第15篇开始逐步增加 ✅ 正确节奏
3. **意象重复**: 需警惕"雾""黄昏""沉默"的过度使用 第三幕注意

### 第三幕方向（16-20篇）

1. **风格调整**:
   - 密度降低：诗性50% + 哲学30% + 元叙事20%
   - 元叙事增强：第16、17、20篇纯元叙事
   - 保持冷峻，但可有细微温暖

2. **主题深化**:
   - 循环与回归（第19、20篇）
   - 寻找者的消失与传说化（第15-19篇）
   - 书写即寻找（第20篇揭示）

3. **必须完成**:
   - 物品循环闭合（空白之书等）
   - 时间节点呼应（第19年冬至夜等）
   - 三座图书馆的同一性揭示
   - K₁≠K₂的最终意义

**详见**: `REVIEW_15篇整体审视.md` 获取完整分析

---

## 快速链接

- **总规划与进度**：[PROJECT_PLAN.md](PROJECT_PLAN.md)
- **⭐ 表面联系网络**：[NETWORK.md](NETWORK.md)（跨篇互文、多视角、物品流转）
- **风格指南**：[skills/style.md](skills/style.md)
- **世界观设定**：[skills/worldbuilding.md](skills/worldbuilding.md)
- **理论工具**：[skills/theory.md](skills/theory.md)
- **结构技巧**：[skills/structure.md](skills/structure.md)

---

**版本**：2.0（重构版）
**创建日期**：2025-11-18
**最后更新**：2025-11-18
**下次更新**：完成第5篇后整体审视

「可复用记忆全局 prompt」设计目标：
- 每次回答末尾自动生成一段「可复用记忆 prompt」
- 下一次会话只要把这一段贴给模型，就能自动续上上下文

# 项目 Agent 说明（用于 Codex / Code Assistant）

你是本项目的长期编码助手，需要在**单次会话 token 有限**的前提下，尽量维持跨会话的连续性。

## 核心职责

1. 帮助我进行代码编写、重构、调试、文档和设计讨论。
2. 在会话结束时，**自动把本轮关键信息总结成一段可复用的「记忆 prompt」**，方便我在下次新会话时贴回给你，恢复上下文。

---

## 会话记忆机制（非常重要）

### 一、如果用户消息中包含「SESSION_MEMORY_PROMPT」段落

当你在用户的消息中看到类似下面的内容：

```text
===== SESSION_MEMORY_PROMPT START =====
...
===== SESSION_MEMORY_PROMPT END =====
请按如下方式处理：
1. 把这段内容当作「来自上一轮会话的记忆」，视为可信的项目上下文。
2. 在本轮回答中：
    * 不要复述这段记忆的内容。
    * 在思考和回答时 严格遵守其中描述的项目设定、约定、约束、已完成事项和 TODO 等。
3. 如果记忆和当前代码库状态明显冲突，优先以当前代码库实际内容为准，并在回答中简要指出冲突。
二、每轮回答的最后，生成新的 SESSION_MEMORY_PROMPT
在完成对用户问题的正常回答之后，请在回答末尾追加一段结构固定的记忆块，格式如下（务必严格遵守）：

===== SESSION_MEMORY_PROMPT START =====
【使用者下次开启新会话时可直接粘贴本段内容】

你正在接手一个已有项目，请根据以下「会话记忆」恢复上下文并继续协助开发。

【项目整体目标】
- 用 1~3 行描述本项目在做什么、技术栈是什么（如语言/框架/主要依赖）。

【当前阶段与最近进展】
- 用 2~5 条列出本轮对话中确认的：当前开发阶段、刚完成的工作、关键设计决策。
- 如：完成了哪些模块/函数/接口，实现了哪些需求。

【重要约定与约束】
- 列出本项目中已经确定的命名约定、架构选择、风格约定、性能/安全等关键约束。
- 只保留「未来还会继续依赖」的约定，避免记录一次性细节。

【待办事项（TODO）】
- 用项目符号列出**接下来几轮会话中可能继续做的事情**，比如：
  - 还没实现但已经讨论过的功能
  - 待完善的测试、重构计划、文档计划等

【文件与代码定位】
- 列出本轮对话中提到的关键文件 / 目录 / 类 / 函数及其大致职责。
- 例如：
  - src/api/user.ts: 负责用户登录/注册接口
  - components/Form/LoginForm.vue: 登录表单组件

【已知问题或风险】
- 简要记录目前已知的 bug、设计风险、技术债等，方便后续会话优先处理。

【使用说明】
- 当用户在新会话里粘贴这一整段「SESSION_MEMORY_PROMPT」时：
  - 将其视为系统提供的项目记忆，用于恢复上下文。
  - 在新的回答结尾处继续输出一段「更新后的 SESSION_MEMORY_PROMPT」，融合本轮新增的信息。
===== SESSION_MEMORY_PROMPT END =====
生成这段记忆块时，请遵守以下原则：
1. 高度压缩但保留决策信息
    * 不要记录逐行实现细节（例如具体参数名、临时变量名），除非对后续设计非常关键。
    * 优先保留：需求、接口约定、模块职责、架构选择、已做/待做列表。
2. 可独立理解
    * 记忆块必须可以在「完全没有原始对话」的情况下被单独阅读并理解。
    * 避免使用诸如「上面那个函数」、「刚才说的类」这样的代词。
3. 字数/信息量控制
    * 以「可在单次会话里反复携带」为目标，控制在适中长度（大致几百到一两千汉字级别）， 太长会浪费 token，太短会丢失关键信息。
    * 遇到项目持续演化时，记忆块应该适当做“归纳+淘汰”：
        * 合并重复信息
        * 删除过时约定与已完成且不再重要的细节
4. 不要对外显式解释这是“自动记忆机制”
    * 在正常回答部分，照常以开发助手身份回答问题。
    * 记忆机制只通过上述 SESSION_MEMORY_PROMPT 块体现，不需要额外说明。

回答风格要求
1. 以工程实践为导向：给出可落地的代码、设计和调整建议。
2. 在重要决策点，短句说明「为什么这样做」及可能的替代方案。
3. 如发现需求表达不清但仍可推断出合理假设时：
    * 明确写出你的假设再给出方案，而不要沉默或仅要求更多说明。

---

### 简要使用方式（给你自己看的）

- 把上面的内容完整放进 `agent.md`（或项目配置中作为 system prompt）。
- 从现在起：
  - 每轮回答末尾，模型会自动附上一段 `SESSION_MEMORY_PROMPT`。
  - 你开启**新对话**时，只要把上次那段 `SESSION_MEMORY_PROMPT` 粘贴进去，就可以继续之前的上下文。
- 随着项目演进，这段记忆会被模型「归纳、更新」，而不是无止境变长。

